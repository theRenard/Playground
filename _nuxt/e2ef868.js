(window.webpackJsonp=window.webpackJsonp||[]).push([[41,37,38,39,40,42],{274:function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return r}))},275:function(t,e,n){var r=n(2),o=n(28),c=n(70),f=n(7),h=n(10),l=n(56),d=n(280),v=n(4),y=o("Reflect","construct"),m=v((function(){function t(){}return!(y((function(){}),[],t)instanceof t)})),w=!v((function(){y((function(){}))})),k=m||w;r({target:"Reflect",stat:!0,forced:k,sham:k},{construct:function(t,e){c(t),f(e);var n=arguments.length<3?t:c(arguments[2]);if(w&&!m)return y(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(d.apply(t,r))}var o=n.prototype,v=l(h(o)?o:Object.prototype),k=Function.apply.call(t,v,e);return h(k)?k:v}})},276:function(t,e,n){"use strict";function r(t,p){return(r=Object.setPrototypeOf||function(t,p){return t.__proto__=p,t})(t,p)}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return o}))},277:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(279),o=n.n(r);function c(t,e){if(e&&("object"===o()(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}},278:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n(130),o=n(131),c=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"setSketch",value:function(t){this.sketch=t}},{key:"getSketch",value:function(){return this.sketch}}]),t}()},279:function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},280:function(t,e,n){"use strict";var r=n(70),o=n(10),c=[].slice,f={},h=function(t,e,n){if(!(e in f)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";f[e]=Function("C,a","return new C("+r.join(",")+")")}return f[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=c.call(arguments,1),f=function(){var r=n.concat(c.call(arguments));return this instanceof f?h(e,r.length,r):e.apply(t,r)};return o(e.prototype)&&(f.prototype=e.prototype),f}},284:function(t,e,n){"use strict";n.r(e),e.default={noise:{octaves:10,persistence:.5,lacunarity:2,exponentiation:3.9,height:64,scale:256,noiseType:"simplex",seed:1},heightmap:{height:16},terrain:{wireframe:!1},sky:{turbidity:10,rayleigh:2,mieCoefficient:.005,mieDirectionalG:.8,luminance:1},sun:{inclination:.31,azimuth:.25}}},285:function(t,e,n){"use strict";e.a={rand_range:function(a,b){return Math.random()*(b-a)+a},rand_normalish:function(){return(Math.random()+Math.random()+Math.random()+Math.random())/4*2-1},rand_int:function(a,b){return Math.round(Math.random()*(b-a)+a)},lerp:function(t,a,b){return t*(b-a)+a},smoothstep:function(t,a,b){return(t=t*t*(3-2*t))*(b-a)+a},smootherstep:function(t,a,b){return(t=t*t*t*(t*(6*t-15)+10))*(b-a)+a},clamp:function(t,a,b){return Math.min(Math.max(t,a),b)},sat:function(t){return Math.min(Math.max(t,0),1)}}},334:function(t,e,n){var r;n(287),n(8),n(335),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(311),n(73),function(){"use strict";var o=.5*(Math.sqrt(3)-1),c=(3-Math.sqrt(3))/6,f=1/6,h=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20;function d(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,n=0,r=1,o=y();t=o(" "),e=o(" "),n=o(" ");for(var i=0;i<arguments.length;i++)(t-=o(arguments[i]))<0&&(t+=1),(e-=o(arguments[i]))<0&&(e+=1),(n-=o(arguments[i]))<0&&(n+=1);return o=null,function(){var o=2091639*t+2.3283064365386963e-10*r;return t=e,e=n,n=o-(r=0|o)}}(t):Math.random,this.p=v(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var i=0;i<512;i++)this.perm[i]=this.p[255&i],this.permMod12[i]=this.perm[i]%12}function v(t){var i,p=new Uint8Array(256);for(i=0;i<256;i++)p[i]=i;for(i=0;i<255;i++){var e=i+~~(t()*(256-i)),n=p[i];p[i]=p[e],p[e]=n}return p}function y(){var t=4022871197;return function(data){data=data.toString();for(var i=0;i<data.length;i++){var e=.02519603282416938*(t+=data.charCodeAt(i));e-=t=e>>>0,t=(e*=t)>>>0,t+=4294967296*(e-=t)}return 2.3283064365386963e-10*(t>>>0)}}d.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var n,r,f=this.permMod12,h=this.perm,l=this.grad3,d=0,v=0,y=0,s=(t+e)*o,i=Math.floor(t+s),m=Math.floor(e+s),w=(i+m)*c,k=t-(i-w),M=e-(m-w);k>M?(n=1,r=0):(n=0,r=1);var x=k-n+c,O=M-r+c,j=k-1+2*c,C=M-1+2*c,S=255&i,_=255&m,A=.5-k*k-M*M;if(A>=0){var G=3*f[S+h[_]];d=(A*=A)*A*(l[G]*k+l[G+1]*M)}var T=.5-x*x-O*O;if(T>=0){var N=3*f[S+n+h[_+r]];v=(T*=T)*T*(l[N]*x+l[N+1]*O)}var F=.5-j*j-C*C;if(F>=0){var R=3*f[S+1+h[_+1]];y=(F*=F)*F*(l[R]*j+l[R+1]*C)}return 70*(d+v+y)},noise3D:function(t,e,n){var r,o,c,h,l,d,v,y,m,w,k=this.permMod12,M=this.perm,x=this.grad3,s=.3333333333333333*(t+e+n),i=Math.floor(t+s),O=Math.floor(e+s),j=Math.floor(n+s),C=(i+O+j)*f,S=t-(i-C),_=e-(O-C),A=n-(j-C);S>=_?_>=A?(l=1,d=0,v=0,y=1,m=1,w=0):S>=A?(l=1,d=0,v=0,y=1,m=0,w=1):(l=0,d=0,v=1,y=1,m=0,w=1):_<A?(l=0,d=0,v=1,y=0,m=1,w=1):S<A?(l=0,d=1,v=0,y=0,m=1,w=1):(l=0,d=1,v=0,y=1,m=1,w=0);var G=S-l+f,T=_-d+f,N=A-v+f,F=S-y+2*f,R=_-m+2*f,D=A-w+2*f,P=S-1+.5,z=_-1+.5,I=A-1+.5,E=255&i,U=255&O,B=255&j,H=.6-S*S-_*_-A*A;if(H<0)r=0;else{var J=3*k[E+M[U+M[B]]];r=(H*=H)*H*(x[J]*S+x[J+1]*_+x[J+2]*A)}var V=.6-G*G-T*T-N*N;if(V<0)o=0;else{var Y=3*k[E+l+M[U+d+M[B+v]]];o=(V*=V)*V*(x[Y]*G+x[Y+1]*T+x[Y+2]*N)}var $=.6-F*F-R*R-D*D;if($<0)c=0;else{var K=3*k[E+y+M[U+m+M[B+w]]];c=($*=$)*$*(x[K]*F+x[K+1]*R+x[K+2]*D)}var L=.6-P*P-z*z-I*I;if(L<0)h=0;else{var Q=3*k[E+1+M[U+1+M[B+1]]];h=(L*=L)*L*(x[Q]*P+x[Q+1]*z+x[Q+2]*I)}return 32*(r+o+c+h)},noise4D:function(t,e,n,r){var o,c,f,d,v,y,m,w,k,M,x,O,j,C,S,_,A,G=this.perm,T=this.grad4,s=(t+e+n+r)*h,i=Math.floor(t+s),N=Math.floor(e+s),F=Math.floor(n+s),R=Math.floor(r+s),D=(i+N+F+R)*l,P=t-(i-D),z=e-(N-D),I=n-(F-D),E=r-(R-D),U=0,B=0,H=0,J=0;P>z?U++:B++,P>I?U++:H++,P>E?U++:J++,z>I?B++:H++,z>E?B++:J++,I>E?H++:J++;var V=P-(y=U>=3?1:0)+l,Y=z-(m=B>=3?1:0)+l,$=I-(w=H>=3?1:0)+l,K=E-(k=J>=3?1:0)+l,L=P-(M=U>=2?1:0)+2*l,Q=z-(x=B>=2?1:0)+2*l,W=I-(O=H>=2?1:0)+2*l,X=E-(j=J>=2?1:0)+2*l,Z=P-(C=U>=1?1:0)+3*l,tt=z-(S=B>=1?1:0)+3*l,et=I-(_=H>=1?1:0)+3*l,nt=E-(A=J>=1?1:0)+3*l,it=P-1+4*l,ot=z-1+4*l,at=I-1+4*l,ut=E-1+4*l,st=255&i,ct=255&N,ft=255&F,ht=255&R,lt=.6-P*P-z*z-I*I-E*E;if(lt<0)o=0;else{var pt=G[st+G[ct+G[ft+G[ht]]]]%32*4;o=(lt*=lt)*lt*(T[pt]*P+T[pt+1]*z+T[pt+2]*I+T[pt+3]*E)}var vt=.6-V*V-Y*Y-$*$-K*K;if(vt<0)c=0;else{var yt=G[st+y+G[ct+m+G[ft+w+G[ht+k]]]]%32*4;c=(vt*=vt)*vt*(T[yt]*V+T[yt+1]*Y+T[yt+2]*$+T[yt+3]*K)}var gt=.6-L*L-Q*Q-W*W-X*X;if(gt<0)f=0;else{var mt=G[st+M+G[ct+x+G[ft+O+G[ht+j]]]]%32*4;f=(gt*=gt)*gt*(T[mt]*L+T[mt+1]*Q+T[mt+2]*W+T[mt+3]*X)}var wt=.6-Z*Z-tt*tt-et*et-nt*nt;if(wt<0)d=0;else{var bt=G[st+C+G[ct+S+G[ft+_+G[ht+A]]]]%32*4;d=(wt*=wt)*wt*(T[bt]*Z+T[bt+1]*tt+T[bt+2]*et+T[bt+3]*nt)}var kt=.6-it*it-ot*ot-at*at-ut*ut;if(kt<0)v=0;else{var Mt=G[st+1+G[ct+1+G[ft+1+G[ht+1]]]]%32*4;v=(kt*=kt)*kt*(T[Mt]*it+T[Mt+1]*ot+T[Mt+2]*at+T[Mt+3]*ut)}return 27*(o+c+f+d+v)}},d._buildPermutationTable=v,void 0===(r=function(){return d}.call(e,n,e,t))||(t.exports=r),e.SimplexNoise=d,t.exports=d}()},335:function(t,e,n){n(340)("Uint8",(function(t){return function(data,e,n){return t(this,data,e,n)}}))},336:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return h}));var r=n(130),o=n(131),c=n(285),f=n(273),h=function(){function t(e,n,o,c){Object(r.a)(this,t),this.position=n.clone(),this.radius=[o,c],this.generator=e}return Object(o.a)(t,[{key:"Get",value:function(t,e){var n=this.position.distanceTo(new f.Nb(t,e)),r=1-c.a.sat((n-this.radius[0])/(this.radius[1]-this.radius[0]));return r=r*r*(3-2*r),[this.generator.Get(t,e),r]}}]),t}()},337:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var r=n(130),o=n(131),c=(n(287),n(8),n(311),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(35),n(24),n(34),n(14),n(25),n(36),n(37),n(16),n(273));function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){f=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw o}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var l=function(){function t(e){var n=e.group,o=e.offset,c=e.scale,f=e.width,h=e.heightGenerators;Object(r.a)(this,t),this.group=n,this.offset=o,this.scale=c,this.width=f,this.heightGenerators=h,this.init()}return Object(o.a)(t,[{key:"init",value:function(){var t=new c.Ob(this.width*this.scale,0,this.width*this.scale);this.plane=new c.R(new c.jb(t.x,t.z,128,128),new c.Y({wireframe:!1,color:255,side:c.v})),this.plane.position.add(this.offset),this.plane.castShadow=!1,this.plane.receiveShadow=!0,this.group.add(this.plane),this.rebuild()}},{key:"rebuild",value:function(){var t=this.offset;console.log("rebuild terrain chunks");for(var e=this.plane.geometry.getAttribute("position"),n=new Float32Array(3*e.count),i=0;i<e.count;i+=1){var r,o=3*i,h=e.array[o+0],l=e.array[o+1],d=0,v=[],y=0,m=f(this.heightGenerators);try{for(m.s();!(r=m.n()).done;){var w=r.value;v.push(w.Get(h+t.x,l+t.y)),y+=v[v.length-1][1]}}catch(t){m.e(t)}finally{m.f()}if(y>0){var k,M=f(v);try{for(M.s();!(k=M.n()).done;){var x=k.value;d+=x[0]*x[1]/y}}catch(t){M.e(t)}finally{M.f()}}n[o+0]=h,n[o+1]=l,n[o+2]=d}var O=new c.i(n,3);this.plane.geometry.setAttribute("position",O),this.heightGenerators.length>1&&0===t.x&&t.y,this.plane.geometry.computeVertexNormals()}}]),t}()},338:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return _}));var r=n(130),o=n(131),c=n(334),f=n.n(c);function h(t){return t*t*t*(t*(6*t-15)+10)}function l(t,a,b){return a+t*(b-a)}var d=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];function v(t,e){var n=15&t,r=1+(7&n);return 8&n&&(r=-r),r*e}function y(t,e,n){var r=7&t,u=r<4?e:n,o=r<4?n:e;return(1&r?-u:u)+(2&r?-2*o:2*o)}function m(t,e,n,r){var o=15&t,u=o<8?e:n,c=o<4?n:12==o||14==o?e:r;return(1&o?-u:u)+(2&o?-c:c)}function w(t,e,n,r,o){var c=31&t,u=c<24?e:n,f=c<16?n:r,h=c<8?r:o;return(1&c?-u:u)+(2&c?-f:f)+(4&c?-h:h)}function k(t){var e,n,r,o;return o=(r=t-(e=Math.floor(t)))-1,n=e+1&255,e&=255,j(.188*l(h(r),v(d[e],r),v(d[n],o)))}function M(t,e){var n,r,o,c,f,v,m,w,s,k,M,x;return m=(f=t-(n=Math.floor(t)))-1,w=(v=e-(r=Math.floor(e)))-1,o=n+1&255,c=r+1&255,n&=255,r&=255,k=h(v),s=h(f),M=l(k,y(d[n+d[r]],f,v),y(d[n+d[c]],f,w)),x=l(k,y(d[o+d[r]],m,v),y(d[o+d[c]],m,w)),j(.507*l(s,M,x))}function x(t,e,n){var r,o,c,f,v,y,w,k,M,x,O,C,s,S,_,A,G,T,N;return x=(w=t-(r=Math.floor(t)))-1,O=(k=e-(o=Math.floor(e)))-1,C=(M=n-(v=Math.floor(n)))-1,c=r+1&255,f=o+1&255,y=v+1&255,r&=255,o&=255,v&=255,_=h(M),S=h(k),s=h(w),A=l(_,m(d[r+d[o+d[v]]],w,k,M),m(d[r+d[o+d[y]]],w,k,C)),G=l(_,m(d[r+d[f+d[v]]],w,O,M),m(d[r+d[f+d[y]]],w,O,C)),T=l(S,A,G),A=l(_,m(d[c+d[o+d[v]]],x,k,M),m(d[c+d[o+d[y]]],x,k,C)),G=l(_,m(d[c+d[f+d[v]]],x,O,M),m(d[c+d[f+d[y]]],x,O,C)),N=l(S,A,G),j(.936*l(s,T,N))}function O(t,e,n,r){var o,c,f,v,y,m,k,M,x,O,C,S,_,A,G,T,s,N,F,q,R,D,P,z,I,E;return _=(x=t-(o=Math.floor(t)))-1,A=(O=e-(c=Math.floor(e)))-1,G=(C=n-(f=Math.floor(n)))-1,T=(S=r-(v=Math.floor(r)))-1,y=o+1&255,m=c+1&255,k=f+1&255,M=v+1&255,o&=255,c&=255,f&=255,v&=255,q=h(S),F=h(C),N=h(O),s=h(x),R=l(q,w(d[o+d[c+d[f+d[v]]]],x,O,C,S),w(d[o+d[c+d[f+d[M]]]],x,O,C,T)),D=l(q,w(d[o+d[c+d[k+d[v]]]],x,O,G,S),w(d[o+d[c+d[k+d[M]]]],x,O,G,T)),P=l(F,R,D),R=l(q,w(d[o+d[m+d[f+d[v]]]],x,A,C,S),w(d[o+d[m+d[f+d[M]]]],x,A,C,T)),D=l(q,w(d[o+d[m+d[k+d[v]]]],x,A,G,S),w(d[o+d[m+d[k+d[M]]]],x,A,G,T)),z=l(F,R,D),I=l(N,P,z),R=l(q,w(d[y+d[c+d[f+d[v]]]],_,O,C,S),w(d[y+d[c+d[f+d[M]]]],_,O,C,T)),D=l(q,w(d[y+d[c+d[k+d[v]]]],_,O,G,S),w(d[y+d[c+d[k+d[M]]]],_,O,G,T)),P=l(F,R,D),R=l(q,w(d[y+d[m+d[f+d[v]]]],_,A,C,S),w(d[y+d[m+d[f+d[M]]]],_,A,C,T)),D=l(q,w(d[y+d[m+d[k+d[v]]]],_,A,G,S),w(d[y+d[m+d[k+d[M]]]],_,A,G,T)),z=l(F,R,D),E=l(N,P,z),j(.87*l(s,I,E))}function j(t){return(1+t)/2}var C=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"noise2D",value:function(t,e){return 2*function(t,e,n,r){switch(arguments.length){case 1:return k(t);case 2:return M(t,e);case 3:return x(t,e,n);case 3:return O(t,e,n,r)}}(t,e)-1}}]),t}(),S=n(284).default.noise,_=function(){function t(){Object(r.a)(this,t),this.noise={simplex:new f.a(S.seed),perlin:new C}}return Object(o.a)(t,[{key:"Get",value:function(t,e){for(var n=t/S.scale,r=e/S.scale,o=this.noise[S.noiseType],c=1,f=1,h=0,l=0,d=0;d<S.octaves;d+=1){l+=(.5*o.noise2D(n*f,r*f)+.5)*c,h+=c,c*=S.persistence,f*=S.lacunarity}return l/=h,Math.pow(l,S.exponentiation)*S.height}}]),t}()},339:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return l}));var r=n(130),o=n(131),c=n(285),f=n(273),h=n(284).default.noise,l=function(){function t(img){Object(r.a)(this,t),this.data=function(image){var canvas=document.createElement("canvas");canvas.width=image.width,canvas.height=image.height;var t=canvas.getContext("2d");return t.drawImage(image,0,0),t.getImageData(0,0,image.width,image.height)}(img)}return Object(o.a)(t,[{key:"Get",value:function(t,e){var n=this,r=function(a,b){var t=4*(a+n.data.width*b);return n.data.data[t]/255},o=new f.Nb(-250,-250),l=new f.Nb(500,500),d=1-c.a.sat((t-o.x)/l.x),v=c.a.sat((e-o.y)/l.y),y=this.data.width-1,m=this.data.height-1,w=Math.floor(d*y),k=Math.floor(v*m),M=c.a.clamp(w+1,0,y),x=c.a.clamp(k+1,0,m),O=d*y-w,j=v*m-k,C=r(w,k),S=r(M,k),_=r(w,x),A=r(M,x),G=c.a.lerp(O,C,S),T=c.a.lerp(O,_,A);return c.a.lerp(j,G,T)*h.height}}]),t}()},353:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return M}));n(275);var r=n(130),o=n(131),c=n(276),f=n(277),h=n(274),l=(n(60),n(273)),d=n(338),v=n(336),y=n(284),m=n(339),w=n(337);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var M=function(t){Object(c.a)(n,t);var e=k(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).chunkSize=500,t}return Object(o.a)(n,[{key:"init",value:function(){this.initNoise(),this.initTerrain()}},{key:"initNoise",value:function(){var t=this,e=function(){for(var e in t.terrainChunks)t.terrainChunks[e].chunk.rebuild()},n=this.getSketch().getGui().addFolder("Terrain.Noise");n.add(y.default.noise,"noiseType",["simplex","perlin"]).onChange(e),n.add(y.default.noise,"scale",64,1024).onChange(e),n.add(y.default.noise,"octaves",1,20,1).onChange(e),n.add(y.default.noise,"persistence",.01,1).onChange(e),n.add(y.default.noise,"lacunarity",.01,4).onChange(e),n.add(y.default.noise,"exponentiation",.1,10).onChange(e),n.add(y.default.noise,"height",0,256).onChange(e),this.noise=new d.default,this.getSketch().getGui().addFolder("Terrain.Heightmap").add(y.default.heightmap,"height",0,128).onChange(e)}},{key:"initTerrain",value:function(){var t=this;this.group=new l.w,this.group.rotation.x=-Math.PI/2,this.getSketch().getScene().add(this.group),this.getSketch().getGui().addFolder("Terrain").add(y.default.terrain,"wireframe").onChange((function(){for(var e in t.terrainChunks)t.terrainChunks[e].chunk.plane.material.wireframe=y.default.terrain.wireframe})),this.terrainChunks={};for(var e=-1;e<=1;e+=1)for(var n=-1;n<=1;n+=1)this.addChunk(e,n)}},{key:"key",value:function(t,e){return"".concat(t,".").concat(e)}},{key:"addChunk",value:function(t,e){for(var n=new l.Nb(t*this.chunkSize,e*this.chunkSize),r=new w.default({group:this.group,offset:new l.Ob(n.x,n.y,0),scale:1,width:this.chunkSize,heightGenerators:[new v.default(this.noise,n,1e5,100001)]}),o=this.key(t,e),c=[],f=-1;f<=1;f+=1)for(var h=-1;h<=1;h+=1)0!==f&&0!==h&&c.push(this.key(t+f,e+h));this.terrainChunks[o]={chunk:r,edges:c}}},{key:"setHeightMap",value:function(img){var t=new v.default(new m.default(img),new l.Nb(0,0),250,300);for(var e in this.terrainChunks)this.terrainChunks[e].chunk.heightGenerators.unshift(t),this.terrainChunks[e].chunk.rebuild()}},{key:"update",value:function(){}},{key:"destroy",value:function(){}}]),n}(n(278).a)}}]);