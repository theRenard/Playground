/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[47,4,44],{278:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(130),o=n(131),c=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,[{key:"setSketch",value:function(e){this.sketch=e}},{key:"getSketch",value:function(){return this.sketch}}]),e}()},282:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(130),o=n(131),c=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,null,[{key:"aspRatio",get:function(){return this.width/this.height}}]),e}();c.width=window.innerWidth,c.height=window.innerHeight},283:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(130),o=n(131),c=(n(312),n(8),n(14),n(313),n(314),n(316),n(317),n(318),n(319),n(320),n(321),n(322),n(323),n(324),n(325),n(326),n(16),n(24),n(35),n(34),n(25),n(36),n(37),n(327)),f=n(273),l=n(328),h=n(282),d=n(329),y=n(330),v=n(331),m=n(332),w=new f.M;w.addHandler(/\.dds$/i,new y.a);var O=new m.a;O.setDecoderPath("/draco/");var j=new v.a;j.setDRACOLoader(O);var R=new d.a(w),k=new f.Jb(w);function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,f=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){f=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(f)throw o}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var x=function(){function e(){Object(r.a)(this,e),this.canvas=null,this.manager=w,this.objLoader=R,this.gltfLoader=j,this.textureLoader=k,this.clock=new f.m,this.gui=new c.a({width:300}),this.elapsedTime=0,this.debug=!1,this.isReadyToRender=!1,this.entities=new Map}return Object(o.a)(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"perspective";this.canvas=e,this.cameraType=t,this.setRenderer(),this.setScene(),this.setCamera(),this.setControls(),this.resize=this.resize.bind(this),this.addResizeListener(),this.addInitialGui(),this.tick=this.tick.bind(this),this.tick()}},{key:"setEntity",value:function(e){e.setSketch(this),e.init(),this.entities.set(e.name,e)}},{key:"getLoaders",value:function(){return{manager:this.manager,objLoader:this.objLoader,gltfLoader:this.gltfLoader,textureLoader:this.textureLoader}}},{key:"getEntities",value:function(){return this.entities}},{key:"getScene",value:function(){return this.scene}},{key:"getCamera",value:function(){return this.camera}},{key:"getGui",value:function(){return this.gui}},{key:"showGui",value:function(){this.gui.show()}},{key:"setRenderer",value:function(){this.canvas&&(this.renderer=new f.Qb({canvas:this.canvas}),this.renderer.setSize(h.a.width,h.a.height),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),this.renderer.setClearColor("#262837"),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=f.hb,this.renderer.outputEncoding=f.Rb)}},{key:"setCamera",value:function(){var e=new f.d(3);this.scene.add(e),"orthographic"===this.cameraType?this.camera=new f.gb(-3*h.a.aspRatio,3*h.a.aspRatio,3,-3,.1,100):this.camera=new f.ib(75,h.a.width/h.a.height,.1,2e3)}},{key:"setScene",value:function(){this.scene=new f.yb}},{key:"setControls",value:function(){this.canvas&&(this.controls=new l.a(this.camera,this.canvas),this.controls.enableDamping=!0)}},{key:"getControls",value:function(){return this.controls}},{key:"getEntityByName",value:function(e){return this.entities.get(e)||null}},{key:"resize",value:function(){h.a.width=window.innerWidth,h.a.height=window.innerHeight,this.camera instanceof f.gb?(this.camera.left=-1*h.a.aspRatio,this.camera.right=1*h.a.aspRatio,this.camera.top=1,this.camera.bottom=-1):this.camera.aspect=h.a.width/h.a.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(h.a.width,h.a.height),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2))}},{key:"addResizeListener",value:function(){window.addEventListener("resize",this.resize)}},{key:"removeResizeListener",value:function(){window.removeEventListener("resize",this.resize)}},{key:"update",value:function(e){var t,n=P(this.entities.values());try{for(n.s();!(t=n.n()).done;){t.value.update(e)}}catch(e){n.e(e)}finally{n.f()}}},{key:"destroyEntities",value:function(){var e,t=P(this.entities.values());try{for(t.s();!(e=t.n()).done;){e.value.destroy()}}catch(e){t.e(e)}finally{t.f()}}},{key:"tick",value:function(){this.elapsedTime=this.clock.getElapsedTime(),this.isReadyToRender&&this.update(this.elapsedTime),this.controls.update(),this.renderer.render(this.scene,this.camera),this.animationReq=window.requestAnimationFrame(this.tick)}},{key:"addInitialGui",value:function(){}},{key:"destroy",value:function(){this.gui.destroy(),this.destroyEntities(),this.removeResizeListener(),window.cancelAnimationFrame(this.animationReq)}}]),e}()},333:function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return r.a}));var r=n(1);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e)){for(var i=0,t=new Array(e.length);i<e.length;i++)t[i]=e[i];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function l(){return"undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function h(e,t){d(e,t),Object.getOwnPropertyNames(t.prototype).forEach((function(n){d(e.prototype,t.prototype,n)})),Object.getOwnPropertyNames(t).forEach((function(n){d(e,t,n)}))}function d(e,t,n){(n?Reflect.getOwnMetadataKeys(t,n):Reflect.getOwnMetadataKeys(t)).forEach((function(r){var o=n?Reflect.getOwnMetadata(r,t,n):Reflect.getOwnMetadata(r,t);n?Reflect.defineMetadata(r,o,e,n):Reflect.defineMetadata(r,o,e)}))}var y={__proto__:[]}instanceof Array;function v(e,t){var n=t.prototype._init;t.prototype._init=function(){var t=this,n=Object.getOwnPropertyNames(e);if(e.$options.props)for(var r in e.$options.props)e.hasOwnProperty(r)||n.push(r);n.forEach((function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})}))};var data=new t;t.prototype._init=n;var r={};return Object.keys(data).forEach((function(e){void 0!==data[e]&&(r[e]=data[e])})),r}var m=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.name=t.name||e._componentTag||e.name;var n=e.prototype;Object.getOwnPropertyNames(n).forEach((function(e){if("constructor"!==e)if(m.indexOf(e)>-1)t[e]=n[e];else{var r=Object.getOwnPropertyDescriptor(n,e);void 0!==r.value?"function"==typeof r.value?(t.methods||(t.methods={}))[e]=r.value:(t.mixins||(t.mixins=[])).push({data:function(){return c({},e,r.value)}}):(r.get||r.set)&&((t.computed||(t.computed={}))[e]={get:r.get,set:r.set})}})),(t.mixins||(t.mixins=[])).push({data:function(){return v(this,e)}});var o=e.__decorators__;o&&(o.forEach((function(e){return e(t)})),delete e.__decorators__);var f=Object.getPrototypeOf(e.prototype),d=f instanceof r.a?f.constructor:r.a,y=d.extend(t);return j(y,e,d),l()&&h(y,e),y}var O={prototype:!0,arguments:!0,callee:!0,caller:!0};function j(e,t,n){Object.getOwnPropertyNames(t).forEach((function(r){if(!O[r]){var c=Object.getOwnPropertyDescriptor(e,r);if(!c||c.configurable){var f,l,h=Object.getOwnPropertyDescriptor(t,r);if(!y){if("cid"===r)return;var d=Object.getOwnPropertyDescriptor(n,r);if(f=h.value,l=o(f),null!=f&&("object"===l||"function"===l)&&d&&d.value===h.value)return}0,Object.defineProperty(e,r,h)}}}))}function R(e){return"function"==typeof e?w(e):function(t){return w(t,e)}}R.registerHooks=function(e){m.push.apply(m,f(e))};var k=R;"undefined"!=typeof Reflect&&Reflect.getMetadata},357:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return y}));n(275);var r=n(130),o=n(131),c=n(276),f=n(277),l=n(274),h=(n(24),n(132),n(273));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var y=function(e){Object(c.a)(n,e);var t=d(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).name="Street",e}return Object(o.a)(n,[{key:"init",value:function(){var e=this;this.streetTexture=this.getSketch().getLoaders().textureLoader.load("./textures/street/street.jpg"),this.streetTexture.flipY=!1,this.streetTexture.encoding=h.Rb,this.roadTexture=this.getSketch().getLoaders().textureLoader.load("./textures/street/road.jpg"),this.roadTexture.flipY=!1,this.roadTexture.encoding=h.Rb,this.streetMaterial=new h.S({map:this.streetTexture}),this.roadMaterial=new h.S({map:this.roadTexture}),this.getSketch().getLoaders().gltfLoader.load("./models/street/street.glb",(function(t){e.street=t.scene,t.scene.traverse((function(t){t.material=e.streetMaterial}));var n=t.scene.children.find((function(e){return"lines"===e.name}));n&&(n.position.y+=.001,n.material=e.roadMaterial),e.getSketch().getScene().add(e.street)}),(function(e){console.log("".concat(e.loaded/e.total*100,"% loaded"))}),(function(e){console.log("An error happened")})),console.log("added street")}},{key:"update",value:function(){}},{key:"destroy",value:function(){this.getSketch().getScene().remove(this.street),this.streetTexture.dispose(),this.roadTexture.dispose(),this.streetMaterial.dispose(),this.roadMaterial.dispose(),console.log("removed airplane")}}]),n}(n(278).a)},359:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return v}));n(275);var r=n(130),o=n(131),c=n(276),f=n(277),l=n(274),h=(n(24),n(287),n(8),n(311),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(309),n(310),n(273)),d=n(278);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var v=function(e){Object(c.a)(n,e);var t=y(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).name="Fireflies",e}return Object(o.a)(n,[{key:"init",value:function(){this.firefliesGeometry=new h.j;for(var e=new Float32Array(90),t=new Float32Array(30),i=0;i<30;i+=1){var n=Math.random()*Math.PI*2,r=Math.random()*(2.8-1.5)+1.5,o=2.8-r+.2;e[3*i+0]=Math.cos(n)*o-1,e[3*i+1]=r,e[3*i+2]=0+Math.sin(n)*o,t[i]=.5*Math.random()+.1}this.firefliesGeometry.setAttribute("position",new h.i(e,3)),this.firefliesGeometry.setAttribute("aScale",new h.i(t,1)),this.firefliesMaterial=new h.zb({uniforms:{uTime:{value:0},uPixelRatio:{value:Math.min(window.devicePixelRatio,2)},uSize:{value:20}},vertexShader:"uniform float uTime;\nuniform float uPixelRatio;\nuniform float uSize;\n\nattribute float aScale;\n\nvoid main()\n{\n\n    vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n    float scale = cos(uTime * modelPosition.y * modelPosition.x) * aScale;\n    modelPosition.x += cos(uTime * (1.0 / aScale) / 2.0 + modelPosition.x * 100.0) * aScale * 0.2;\n    modelPosition.y += sin(uTime * (1.0 / aScale) / 2.0 + modelPosition.y * 100.0) * aScale * 0.3;\n    modelPosition.z += sin(uTime * (1.0 / aScale) / 2.0 + modelPosition.z * 100.0) * aScale * 0.2;\n\n    vec4 viewPosition = viewMatrix * modelPosition;\n    vec4 projectionPosition = projectionMatrix * viewPosition;\n\n    gl_Position = projectionPosition;\n\n    gl_PointSize = uSize * scale * uPixelRatio;\n    gl_PointSize *= (1.0 / - viewPosition.z);\n}",fragmentShader:"void main()\n{\n    float distanceToCenter = distance(gl_PointCoord, vec2(0.5));\n    float strength = 0.05 / distanceToCenter - 0.1;\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, strength);\n}",transparent:!0,blending:h.a,depthWrite:!1}),this.getSketch().getGui().add(this.firefliesMaterial.uniforms.uSize,"value").min(0).max(500).step(1).name("firefliesSize");var c=new h.mb(this.firefliesGeometry,this.firefliesMaterial);this.getSketch().getScene().add(c)}},{key:"update",value:function(e){this.firefliesMaterial.uniforms.uTime.value=e}},{key:"destroy",value:function(){this.firefliesGeometry.dispose(),this.firefliesMaterial.dispose()}}]),n}(d.a)},377:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return j}));n(275);var r=n(130),o=n(131),c=n(286),f=n(276),l=n(277),h=n(274),d=n(283),y=n(282),v=n(273),m=n(357),w=n(359);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(h.a)(e);if(t){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var j=function(e){Object(f.a)(n,e);var t=O(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"init",value:function(e){Object(c.a)(Object(h.a)(n.prototype),"init",this).call(this,e,"orthographic");var t=new m.default,r=new w.default;this.setEntity(t),this.setEntity(r);var o=this.getCamera();o.position.set(1,1.5,1),o.left=-3*y.a.aspRatio,o.right=3*y.a.aspRatio,o.top=3,o.bottom=-3,o.far=1e4,o.near=-10,this.getControls().target=new v.Ob(0,1,0),o.updateProjectionMatrix(),this.isReadyToRender=!0}}]),n}(d.a)},420:function(e,t,n){"use strict";n.r(t);n(275);var r=n(130),o=n(131),c=n(276),f=n(277),l=n(274),h=n(13),d=(n(46),n(333)),y=n(377);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var m=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},w=function(e){Object(c.a)(n,e);var t=v(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"mounted",value:function(){this.sketch=new y.default,this.sketch.init(this.$el)}},{key:"beforeDestroy",value:function(){this.sketch.destroy()}}]),n}(d.b),O=w=m([d.a],w),j=n(38),component=Object(j.a)(O,(function(){var e=this.$createElement;return(this._self._c||e)("canvas")}),[],!1,null,null,null);t.default=component.exports}}]);